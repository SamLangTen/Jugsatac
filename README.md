# ğŸ›¹JugsatacğŸ›¸

**Jugsatac** å…¨ç§°ä¸º ***J**inan **U**niversity **G**raduated **S**tudent **A**I **2**020 Course's **A**ssignment **C**ollector*ï¼Œå³ã€Šç”¨äºJNU 2020å¹´ç ”ç©¶ç”Ÿäººå·¥æ™ºèƒ½è¯¾ç¨‹çš„ä½œä¸šæ”¶é›†ç¨‹åºã€‹ã€‚è¯¥ç¨‹åºç”¨äºåœ¨æŒ‡å®šé‚®ç®±æ‹‰å–æŒ‡å®šæ ‡é¢˜æ ¼å¼çš„é‚®ä»¶ï¼Œå¹¶å°†æ­£æ–‡æå–ï¼Œç”ŸæˆæŠ¥å‘Šï¼›æˆ–ä¸‹è½½æŒ‡å®šé‚®ç®±å†…æŒ‡å®šæ ‡é¢˜æ ¼å¼çš„é™„ä»¶ã€‚

Jugsatacç›®å‰åªæ”¯æŒIMAPåè®®çš„é‚®ä»¶æœåŠ¡å™¨ã€‚

## ä½¿ç”¨æ–¹æ³•

Jugsatacæœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼šåˆ†ç±»å’Œä¸‹è½½ã€‚å‰è€…ç”¨äºæå–æ­£æ–‡å¹¶ç”ŸæˆæŠ¥å‘Šï¼Œåè€…ç”¨äºä¸‹è½½æŒ‡å®šæ ‡é¢˜çš„é™„ä»¶ã€‚æ— è®ºæ˜¯å“ªä¸€ç§éƒ½éœ€è¦ä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„æ¨¡æ¿ï¼š
```
{
    "host": "imap.example.com",
    "port": 993,
    "username": "assignments@example.com",
    "password": "ä½ çš„å¯†ç ",
    "mailbox": "INBOX",
    "assignments": [
        {
            "name": "ä½œä¸š1",
            "identifierPattern": "-ä½œä¸š1$",
            "submitterPattern": "(?<=\\+?)([\\u4e00-\\u9fa5]{1,20}|[a-zA-Z\\.\\s]{1,20})(?=\\+?)",
            "onlySubject": false,
            "hideSubmitterName": true
        },
        {
            "name": "ä½œä¸š2",
            "identifierPattern": "-ä½œä¸š2$",
            "submitterPattern": "(?<=\\+?)([\\u4e00-\\u9fa5]{1,20}|[a-zA-Z\\.\\s]{1,20})(?=\\+?)",
            "onlySubject": true,
            "hideSubmitterName": false
        }
    ]
}
```

```host```ã€```port```ã€```username```ã€```password```åˆ†åˆ«ä¸ºä½ çš„é‚®ç®±æœåŠ¡å™¨ä¿¡æ¯ã€‚```mailbox```ä¸ºéœ€è¦æ‹‰å–çš„æ”¶ä»¶ç®±ï¼Œè¿™æ ·çš„è®¾è®¡å¯ä»¥è®©ç”¨æˆ·é€šè¿‡é‚®ä»¶æœåŠ¡å™¨çš„å½’æ¡£åŠŸèƒ½ï¼Œå°†ä¸åŒæ ‡é¢˜ç‰¹å¾çš„é‚®ä»¶å½’æ¡£åˆ°ä¸åŒæ”¶ä»¶ç®±ï¼Œä»è€ŒåŠ å¿«æ‹‰å–é€Ÿåº¦ä»¥åŠæé«˜æ•´æ´åº¦ã€‚

* ```assignments```å±æ€§ä¸ºåˆ—è¡¨ï¼Œè§„å®šäº†å¤šä¸ªä½œä¸šæ‹‰å–ä»»åŠ¡ã€‚
* ```name```è¡¨ç¤ºä½œä¸šåç§°ï¼Œä¼šç”Ÿæˆåˆ°æŠ¥å‘Šä¸­ã€‚
* ```identifierPattern```ä¸ºç”¨äºè¯†åˆ«é‚®ä»¶æ ‡é¢˜çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å½“é‚®ä»¶æ ‡é¢˜åŒ¹é…æ—¶è¯¥é‚®ä»¶æ‰å±äºè¯¥ä»»åŠ¡é¡¹ã€‚
* ```submitterPattern```ä¸ºç”¨äºæå–é‚®ä»¶æ ‡é¢˜å†…çš„æäº¤äººä¿¡æ¯çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
* ```onlySubject```æŒ‡ç¤ºJugsatacæ˜¯å¦åªæ‹‰å–æ ‡é¢˜ä¸æ‹‰å–æ­£æ–‡ï¼Œæœ‰æ—¶ä½ å¯èƒ½åªéœ€è¦ä¸€ä¸ªæ˜¯å¦æäº¤çš„åå•è€Œä¸æ˜¯å…·ä½“å†…å®¹ï¼Œå¯ä»¥è®¾ç½®æ­¤é¡¹åŠ å¿«æ‹‰å–é€Ÿåº¦ã€‚
* ```hideSubmitterName```æŒ‡ç¤ºJugsatcæ˜¯å¦éšå»éƒ¨åˆ†äººçš„å§“åã€‚åªæ”¯æŒä¸­æ–‡å§“åã€‚

ä»¥ä¸Šæ¨¡æ¿å¯ä»¥åŒ¹é…å¦‚ä¸‹æ ‡é¢˜çš„é‚®ä»¶ï¼š
```
å¼ ä¸‰+æå››-ä½œä¸š1
Takajima Kenji+ç‹äº”-ä½œä¸š2
```

### åˆ†ç±»æ¨¡å¼

å¦‚æœä½¿ç”¨**åˆ†ç±»æ¨¡å¼**ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š
```
Jugsatac -s CONFIG_FILE [-o OUTPUT_FILE]
```
```-s```å‚æ•°è¡¨ç¤ºè¯»å…¥ä¸Šæ–‡æåŠçš„é…ç½®æ–‡ä»¶ã€‚```-o```æ˜¯å¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºç”ŸæˆæŠ¥å‘Šçš„è¾“å‡ºæ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™åœ¨æ ‡å‡†è¾“å‡ºä¸­è¾“å‡ºæŠ¥å‘Šã€‚

å¯¹äºç¬¬ä¸€ä¸ªé‚®ä»¶ï¼Œæœ€ç»ˆå¯¼å‡ºçš„æŠ¥å‘Šå½¢å¦‚ä¸‹æ–‡æ‰€ç¤ºï¼š
```
names: *ä¸‰ã€*å››
titleï¼šä½œä¸š1
contentï¼šæ­£æ–‡
timeï¼šé‚®ä»¶åˆ°è¾¾æ—¶é—´
```

å¯¹äºç¬¬äºŒä¸ªé‚®ä»¶ï¼Œæœ€ç»ˆå¯¼å‡ºçš„æŠ¥å‘Šå½¢å¦‚ä¸‹æ–‡æ‰€ç¤ºï¼š
```
names: Takajima Kenjiã€ç‹äº”
titleï¼šä½œä¸š2
contentï¼šæ­£æ–‡
timeï¼šé‚®ä»¶åˆ°è¾¾æ—¶é—´
```

> ä»¥ä¸ŠæŠ¥å‘Šä»…ä¸ºèŒƒä¾‹ï¼Œå®é™…ç”Ÿæˆæ•ˆæœä¸ºJSONæ ¼å¼ã€‚

åˆ†ç±»æ¨¡å¼å¯ä»¥ç¼“å­˜å·²ç»æ‹‰å–è¿‡çš„é‚®ä»¶æ­£æ–‡ï¼Œä»¥åœ¨ä¸‹ä¸€æ¬¡æ‹‰å–æ—¶åŠ é€Ÿã€‚ä½¿ç”¨```-c CACHE_FILE```å‚æ•°å¯å¯ç”¨ç¼“å­˜æ¨¡å¼ã€‚```CACHE_FILE```ä¸ºä¿å­˜çš„ç¼“å­˜æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œè‹¥æ–‡ä»¶å­˜åœ¨åˆ™è¯»å…¥ç¼“å­˜å†…å®¹ã€‚

### ä¸‹è½½æ¨¡å¼

å¦‚æœä½¿ç”¨**ä¸‹è½½æ¨¡å¼**ï¼Œ```assignments```å±æ€§å†…çš„ä»»åŠ¡é¡¹ä»…æœ‰```name```å’Œ```identifierPattern```æœ‰æ•ˆã€‚

è¾“å…¥æ­¤å‘½ä»¤ï¼š
```
Jugsatac -s CONFIG_FILE -o OUTPUT_DIRECTORY
```

æ­¤æ—¶```-o```å‚æ•°ä¸ºå¿…é€‰å‚æ•°ï¼Œè¡¨ç¤ºä¸‹è½½é™„ä»¶çš„å­˜æ”¾ç›®å½•ã€‚Jugsatacä¼šåœ¨ç›®å½•å†…åˆ›å»ºä»¥ä»»åŠ¡é¡¹åä¸ºåç§°çš„å­ç›®å½•ï¼Œå¹¶å°†åŒ¹é…çš„é‚®ä»¶é™„è¿‘ä¸‹è½½åˆ°å­ç›®å½•ä¸­ï¼Œå¹¶å°†é™„è¿‘ä¿®æ”¹æ—¥æœŸè®¾å®šä¸ºé‚®ä»¶åˆ°è¾¾æ—¥æœŸ

## Dockeré€‚é…

ä½ å¯ä»¥é€šè¿‡Dockerfileæ„å»ºæˆ–ä½¿ç”¨ä½œè€…æäº¤çš„é•œåƒã€‚ä¸‹é¢æ˜¯ä¸€äº›ç”¨æ³•ï¼š

* ä¸å¸¦ç¼“å­˜çš„åˆ†ç±»æ¨¡å¼ï¼š
    ```
    docker run -v /path/to/your/config:/app/config.json --rm samlangten/jugsatac -s /app/config.json
    ```

* å¸¦ç¼“å­˜çš„åˆ†ç±»æ¨¡å¼ï¼š
    ```
    docker run -v /path/to/your/config:/app/config.json -v /path/to/your/cache:/app/cache.json --rm samlangten/jugsatac -s /app/config.json -c /app/cache.json
    ```

* å¸¦ç¼“å­˜çš„åˆ†ç±»æ¨¡å¼ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ï¼š
    ```
    docker run -v /path/to/your/config:/app/config.json -v /path/to/your/cache:/app/cache.json -v /path/to/your/output/file:/app/output.json --rm samlangten/jugsatac -s /app/config.json -c /app/cache.json -o /app/output.json
    ```

* ä¸‹è½½æ¨¡å¼ï¼š
    ```
    docker run -v /path/to/your/config:/app/config.json -v /path/to/download/dir:/app/download --rm samlangten/jugsatac -s /app/config.json -o /app/download -d
    ```